
# Telega_in тестовое задание: 
# Сбор данных из Telegram-каналов

Это тестовое задание выполнялось по ТЗ:

https://docs.google.com/document/d/1UfsuOolK5p2sUiPNOyXsd7E3hCvK6IbSGFQRefRV3Fs/edit?tab=t.0#heading=h.2fdd4zash7v7

## Deployment

Для запуска необходимо склонить репозиторий себе и выполнить:

```bash
  docker-compose up -d
```

Создастся 2 докер контейнера - с БД, в данном случае postgres:13, и с исполняемым скриптом. Так же при создании контейнера с БД, сразу же создается таблица telegram_posts, в которую и будут загружаться записи.
## Environment Variables

Для запуска этого проекта вам необходимо добавить следующие переменные среды в ваш файл .env

`API_ID`

`API_HASH`

`PHONE_NUMBER`

`TELEGRAM_CHANNELS`

Так как не было четкого требования, откуда мы берем список каналов, я поместил его в этот файл, для удобства редактирования. Сейчас там список из - приватного чата, личного чата, открытого канала, приватного канала и открытого чата.

Чтобы получить параметры обратитесь по ссылке:

    https://my.telegram.org/apps

Чтобы облегчить получение списка каналов и их ID, был добавлен скрипт 

    get_all_chats_ids.py

Результат выполнения которого, вернет список всех чатов и каналов, в которых вы состоите, сразу с правильной размерностью. Для каналов c -100 в начале и длинной 13 символов.

Чтобы проверить доступность канала для чтения или отправки сообщений, было создано 2 скрипта:

`check_can_you_read_message.py`

`check_can_you_send_message.py`
## FAQ

#### Для просмотра логов создается отдельный файл, посмотреть логи можно выполнив: 

    cat telegram_script.log

Так же логи можно просматривать в самих контейнерах. 

## Tech Stack

**Using Libraries:** telethon, psycopg2-binary, python-dotenv, os, logging, asyncio

**DataBase:** PostgreSQL 13

